<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WordMaster</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<div class="app-container">

    <aside class="sidebar">
        <div class="logo">WordMaster.</div>
        <nav class="nav-menu">
            <button class="nav-item active" onclick="App.navigate('dashboard')">
                <i class="fas fa-home"></i> Dashboard
            </button>
            <button class="nav-item" onclick="App.navigate('dictionary')">
                <i class="fas fa-book"></i> Dictionary
            </button>
        </nav>
        <button class="btn-sidebar-add" onclick="App.openModal()">
            <i class="fas fa-plus"></i> Add Word
        </button>
    </aside>

    <main class="main-content">

        <div id="view-dashboard" class="view active">
            <header class="header-row">
                <h1>Progress Overview</h1>
                <div class="streak-badge">üî• <span id="streak-val">0</span> Days</div>
            </header>

            <div class="card goal-card">
                <div class="card-header-row">
                    <h3>Goal: <span id="goal-target">100</span> words</h3>
                    <i class="fas fa-pen edit-icon" onclick="App.openGoalModal()" title="Edit Goal"></i>
                </div>
                <div class="progress-track">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-label"><span id="goal-current">0</span> / <span id="goal-max">100</span> learned</div>
            </div>

            <div class="stats-grid">
                <div class="card stat-card">
                    <div class="stat-num" id="stat-total">0</div>
                    <div class="stat-label">TOTAL WORDS</div>
                </div>
                <div class="card stat-card">
                    <div class="stat-num" id="stat-learned">0</div>
                    <div class="stat-label">LEARNED</div>
                </div>
                <div class="card stat-card">
                    <div class="stat-num" id="stat-today">0</div>
                    <div class="stat-label">TODAY</div>
                </div>
            </div>

            <div class="card training-card">
                <h3>Start Training</h3>
                <div class="training-controls">
                    <div class="control-group">
                        <label>Amount</label>
                        <div class="count-selector" id="count-options">
                            <button class="count-btn" data-val="10">10</button>
                            <button class="count-btn active" data-val="20">20</button>
                            <button class="count-btn" data-val="30">30</button>
                        </div>
                    </div>
                    <div class="control-group right">
                        <label>Filter</label>
                        <select id="train-filter" class="custom-select">
                            <option value="new_learning">New + Learning</option>
                            <option value="new">New Only</option>
                            <option value="learned">Review Learned</option>
                            <option value="all">All Words</option>
                        </select>
                    </div>
                </div>
                <button class="btn-black-large" onclick="App.startSession()">Let's Go</button>
            </div>

            <div style="margin-top: 30px; padding-bottom: 80px;">
                <h3>Recently Added</h3>
                <div id="recent-list" class="word-list"></div>
            </div>

            <button class="btn-float-reset" onclick="App.initResetStats()" title="Reset Statistics">
                <i class="fas fa-undo-alt"></i>
            </button>
        </div>

        <div id="view-dictionary" class="view">
            <header class="header-row">
                <h1>Dictionary</h1>
            </header>

            <div class="dictionary-controls">
                <select id="dict-filter" class="filter-pill" onchange="App.renderDictionary()">
                    <option value="all">All Statuses</option>
                    <option value="new">New</option>
                    <option value="learning">Learning</option>
                    <option value="learned">Learned</option>
                </select>

                <div class="search-row-combined">
                    <div class="search-wrap">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search-input" placeholder="Search..." oninput="App.renderDictionary()" autocomplete="off">
                    </div>
                    <button class="btn-icon-danger" onclick="App.initDeleteAllWords()" title="Delete All Words">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div>
            </div>

            <div id="dictionary-list" class="word-list" style="padding-bottom: 80px;"></div>
        </div>

        <div id="view-learning" class="view">
            <div class="learning-header">
                <button class="btn-back" onclick="App.navigate('dashboard')">
                    <i class="fas fa-times"></i>
                </button>
                <div class="progress-bar-thin">
                    <div id="session-progress" style="width: 0%"></div>
                </div>
                <span id="session-counter" style="font-weight: 600;">1 / 20</span>
            </div>

            <div class="flashcard-container">
                <div class="flashcard">
                    <div class="fc-top">
                        <span class="fc-tag" id="fc-tag">Tag</span>
                    </div>
                    <div class="fc-center">
                        <h1 id="fc-word">Word</h1>
                        <div id="fc-answer-block" style="display: none;">
                            <h2 id="fc-translation">Translation</h2>
                            <p id="fc-example">Example sentence</p>
                        </div>
                    </div>
                    <div class="fc-bottom">
                        <button id="btn-show" class="btn-black-pill" onclick="App.revealCard()">Show Answer</button>
                        <div id="fc-buttons" style="display: none; width: 100%; gap: 10px;">
                            <button class="btn-result btn-bad" onclick="App.handleResult(false)">Don't Know</button>
                            <button class="btn-result btn-good" onclick="App.handleResult(true)">Know</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>
</div>

<nav class="mobile-nav">
    <button class="m-nav-item active" onclick="App.navigate('dashboard')">
        <i class="fas fa-home"></i>
    </button>
    <div class="m-nav-add" onclick="App.openModal()">
        <i class="fas fa-plus"></i>
    </div>
    <button class="m-nav-item" onclick="App.navigate('dictionary')">
        <i class="fas fa-book"></i>
    </button>
</nav>

<div id="modal-overlay" class="modal-overlay">
    <div class="modal-window">
        <div class="modal-header">
            <h2 id="modal-title">Word</h2>
            <i class="fas fa-times close-icon" onclick="App.closeModal('modal-overlay')"></i>
        </div>
        <form id="word-form" onsubmit="event.preventDefault(); App.saveWord();" autocomplete="off">
            <input type="hidden" id="inp-id">
            <div class="input-group">
                <label>Word *</label>
                <input type="text" id="inp-word" required placeholder="e.g. Epiphany" autocomplete="off">
            </div>
            <div class="input-group">
                <label>Translation *</label>
                <input type="text" id="inp-trans" required placeholder="Meaning" autocomplete="off">
            </div>
            <div class="input-group">
                <label>Example</label>
                <input type="text" id="inp-example" placeholder="Optional context" autocomplete="off">
            </div>
            <div class="input-group">
                <label>Tag *</label>
                <input type="text" id="inp-tag" required list="tags-list" placeholder="e.g. Work, Movie" autocomplete="off">
                <datalist id="tags-list"></datalist>
            </div>
            <div class="input-group">
                <label>Source</label>
                <input type="text" id="inp-source" placeholder="e.g. YouTube" autocomplete="off">
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-white" onclick="App.closeModal('modal-overlay')">Cancel</button>
                <button type="submit" class="btn-black">Save</button>
                <button type="button" id="btn-delete" class="btn-red-text" style="display:none" onclick="App.promptDelete()">Delete</button>
            </div>
        </form>
    </div>
</div>

<div id="modal-goal" class="modal-overlay">
    <div class="modal-window small-modal">
        <div class="modal-header">
            <h2>Set Goal</h2>
            <i class="fas fa-times close-icon" onclick="App.closeModal('modal-goal')"></i>
        </div>
        <form onsubmit="event.preventDefault(); App.saveGoal();" autocomplete="off">
            <div class="input-group">
                <label>Target Words</label>
                <input type="number" id="inp-goal" required min="1" placeholder="100" autocomplete="off">
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-white" onclick="App.closeModal('modal-goal')">Cancel</button>
                <button type="submit" class="btn-black">Save</button>
            </div>
        </form>
    </div>
</div>

<div id="modal-message" class="modal-overlay">
    <div class="modal-window centered-text" style="max-width: 350px;">
        <div style="font-size: 40px; margin-bottom: 15px;">ü§î</div>
        <h2 id="msg-title" style="font-size: 20px; margin-bottom: 10px;">Notice</h2>
        <p id="msg-text" style="color: var(--text-muted); margin-bottom: 25px; line-height: 1.5;">Message goes here.</p>
        <button class="btn-black-large" onclick="App.closeModal('modal-message')">Okay</button>
    </div>
</div>

<div id="modal-delete-confirm" class="modal-overlay">
    <div class="modal-window small-modal centered-text">
        <div style="font-size: 40px; margin-bottom: 10px;">üóëÔ∏è</div>
        <h2>Delete Word?</h2>
        <p style="color: var(--text-muted); margin-bottom: 20px;">This action cannot be undone.</p>
        <div class="modal-actions" style="justify-content: center;">
            <button class="btn-white" onclick="App.closeModal('modal-delete-confirm')">Cancel</button>
            <button class="btn-red-solid" onclick="App.confirmDeleteAction()">Delete</button>
        </div>
    </div>
</div>

<div id="modal-complete" class="modal-overlay">
    <div class="modal-window centered-text complete-modal">
        <div class="complete-icon">üéâ</div>
        <h2>Session Finished</h2>
        <p>You've made progress today. Keep it up!</p>
        <div class="complete-stats">
            <div class="c-stat-card">
                <span id="cs-count" class="stat-big">0</span>
                <span class="stat-small">WORDS</span>
            </div>
            <div class="c-stat-card">
                <span id="cs-streak" class="stat-big">0</span>
                <span class="stat-small">STREAK</span>
            </div>
        </div>
        <button class="btn-black-large" onclick="App.closeSessionModal()">Continue</button>
    </div>
</div>

<div id="modal-status" class="modal-overlay">
    <div class="modal-window small-modal">
        <div class="modal-header">
            <h2>Change Status</h2>
            <i class="fas fa-times close-icon" onclick="App.closeModal('modal-status')"></i>
        </div>
        <div class="status-options">
            <button class="status-btn st-new" onclick="App.requestStatusChange('new')">New</button>
            <button class="status-btn st-learning" onclick="App.requestStatusChange('learning')">Learning</button>
            <button class="status-btn st-learned" onclick="App.requestStatusChange('learned')">Learned</button>
        </div>
    </div>
</div>

<div id="modal-confirm" class="modal-overlay">
    <div class="modal-window small-modal">
        <h2>Confirm</h2>
        <p>Are you sure you want to change the status?</p>
        <div class="modal-actions">
            <button class="btn-white" onclick="App.closeModal('modal-confirm')">No</button>
            <button class="btn-black" onclick="App.confirmStatusChange()">Yes</button>
        </div>
    </div>
</div>

<div id="modal-danger-1" class="modal-overlay">
    <div class="modal-window small-modal centered-text">
        <div style="font-size: 40px; margin-bottom: 10px;">‚ö†Ô∏è</div>
        <h2 id="dz-title-1">Are you sure?</h2>
        <p id="dz-text-1" style="color: var(--text-muted); margin-bottom: 20px;">This action is destructive.</p>
        <div class="modal-actions" style="justify-content: center;">
            <button class="btn-white" onclick="App.closeModal('modal-danger-1')">Cancel</button>
            <button class="btn-black" onclick="App.dangerStep2()">Yes, I'm sure</button>
        </div>
    </div>
</div>

<div id="modal-danger-2" class="modal-overlay">
    <div class="modal-window small-modal centered-text">
        <div style="font-size: 40px; margin-bottom: 10px;">üö®</div>
        <h2>Absolutely sure?</h2>
        <p style="color: var(--text-muted); margin-bottom: 20px;">This cannot be undone. All data will be lost.</p>
        <div class="modal-actions" style="justify-content: center;">
            <button class="btn-white" onclick="App.closeModal('modal-danger-2')">Cancel</button>
            <button class="btn-red-solid" onclick="App.executeDestructiveAction()">CONFIRM</button>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>